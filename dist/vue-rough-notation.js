!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).VueRoughNotation={})}(this,(function(t){"use strict";const e={animate:!0,animationDuration:800,color:"currentColor",strokeWidth:1,padding:5,multiline:!1,iterations:2,brackets:"right"};function n(t,e){const n=Object.create(null),o=t.split(",");for(let t=0;t<o.length;t++)n[o[t]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}function o(t){if(g(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=m(s)?i(s):o(s);if(r)for(const t in r)e[t]=r[t]}return e}return m(t)||w(t)?t:void 0}const s=/;(?![^(]*\))/g,r=/:(.+)/;function i(t){const e={};return t.split(s).forEach(t=>{if(t){const n=t.split(r);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function c(t){let e="";if(m(t))e=t;else if(g(t))for(let n=0;n<t.length;n++){const o=c(t[n]);o&&(e+=o+" ")}else if(w(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const a="production"!==process.env.NODE_ENV?Object.freeze({}):{},u=("production"!==process.env.NODE_ENV&&Object.freeze([]),()=>{}),l=/^on[^a-z]/,h=t=>l.test(t),p=Object.assign,d=Object.prototype.hasOwnProperty,f=(t,e)=>d.call(t,e),g=Array.isArray,_=t=>"[object Map]"===N(t),v=t=>"function"==typeof t,m=t=>"string"==typeof t,y=t=>"symbol"==typeof t,w=t=>null!==t&&"object"==typeof t,b=Object.prototype.toString,N=t=>b.call(t),E=t=>N(t).slice(8,-1),k=t=>m(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,x=(t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))})(t=>t.charAt(0).toUpperCase()+t.slice(1)),O=(t,e)=>!Object.is(t,e);let S;const V=t=>{const e=new Set(t);return e.w=0,e.n=0,e},R=t=>(t.w&C)>0,$=t=>(t.n&C)>0,D=new WeakMap;let M=0,C=1;const j=[];let P;const T=Symbol("production"!==process.env.NODE_ENV?"iterate":""),z=Symbol("production"!==process.env.NODE_ENV?"Map key iterate":"");class I{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],function(t,e){(e=e||void 0)&&e.active&&e.effects.push(t)}(this,n)}run(){if(!this.active)return this.fn();if(!j.length||!j.includes(this))try{return j.push(P=this),W.push(F),F=!0,C=1<<++M,M<=30?(({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=C})(this):A(this),this.fn()}finally{M<=30&&(t=>{const{deps:e}=t;if(e.length){let n=0;for(let o=0;o<e.length;o++){const s=e[o];R(s)&&!$(s)?s.delete(t):e[n++]=s,s.w&=~C,s.n&=~C}e.length=n}})(this),C=1<<--M,U(),j.pop();const t=j.length;P=t>0?j[t-1]:void 0}}stop(){this.active&&(A(this),this.onStop&&this.onStop(),this.active=!1)}}function A(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let F=!0;const W=[];function L(){W.push(F),F=!1}function U(){const t=W.pop();F=void 0===t||t}function B(t,e,n){if(!F||void 0===P)return;let o=D.get(t);o||D.set(t,o=new Map);let s=o.get(n);s||o.set(n,s=V());!function(t,e){let n=!1;M<=30?$(t)||(t.n|=C,n=!R(t)):n=!t.has(P);n&&(t.add(P),P.deps.push(t),"production"!==process.env.NODE_ENV&&P.onTrack&&P.onTrack(Object.assign({effect:P},e)))}(s,"production"!==process.env.NODE_ENV?{effect:P,target:t,type:e,key:n}:void 0)}function G(t,e,n,o,s,r){const i=D.get(t);if(!i)return;let c=[];if("clear"===e)c=[...i.values()];else if("length"===n&&g(t))i.forEach((t,e)=>{("length"===e||e>=o)&&c.push(t)});else switch(void 0!==n&&c.push(i.get(n)),e){case"add":g(t)?k(n)&&c.push(i.get("length")):(c.push(i.get(T)),_(t)&&c.push(i.get(z)));break;case"delete":g(t)||(c.push(i.get(T)),_(t)&&c.push(i.get(z)));break;case"set":_(t)&&c.push(i.get(T))}const a="production"!==process.env.NODE_ENV?{target:t,type:e,key:n,newValue:o,oldValue:s,oldTarget:r}:void 0;if(1===c.length)c[0]&&("production"!==process.env.NODE_ENV?q(c[0],a):q(c[0]));else{const t=[];for(const e of c)e&&t.push(...e);"production"!==process.env.NODE_ENV?q(V(t),a):q(V(t))}}function q(t,e){for(const n of g(t)?t:[...t])(n!==P||n.allowRecurse)&&("production"!==process.env.NODE_ENV&&n.onTrigger&&n.onTrigger(p({effect:n},e)),n.scheduler?n.scheduler():n.run())}const H=n("__proto__,__v_isRef,__isVue"),J=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(y)),K=tt(),Q=tt(!0),X=tt(!0,!0),Y=Z();function Z(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...t){const n=At(this);for(let t=0,e=this.length;t<e;t++)B(n,"get",t+"");const o=n[e](...t);return-1===o||!1===o?n[e](...t.map(At)):o}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...t){L();const n=At(this)[e].apply(this,t);return U(),n}}),t}function tt(t=!1,e=!1){return function(n,o,s){if("__v_isReactive"===o)return!t;if("__v_isReadonly"===o)return t;if("__v_isShallow"===o)return e;if("__v_raw"===o&&s===(t?e?$t:Rt:e?Vt:St).get(n))return n;const r=g(n);if(!t&&r&&f(Y,o))return Reflect.get(Y,o,s);const i=Reflect.get(n,o,s);if(y(o)?J.has(o):H(o))return i;if(t||B(n,"get",o),e)return i;if(Ut(i)){return!r||!k(o)?i.value:i}return w(i)?t?Mt(i):Dt(i):i}}function et(t=!1){return function(e,n,o,s){let r=e[n];if(Tt(r)&&Ut(r)&&!Ut(o))return!1;if(!t&&!Tt(o)&&(zt(o)||(o=At(o),r=At(r)),!g(e)&&Ut(r)&&!Ut(o)))return r.value=o,!0;const i=g(e)&&k(n)?Number(n)<e.length:f(e,n),c=Reflect.set(e,n,o,s);return e===At(s)&&(i?O(o,r)&&G(e,"set",n,o,r):G(e,"add",n,o)),c}}const nt={get:K,set:et(),deleteProperty:function(t,e){const n=f(t,e),o=t[e],s=Reflect.deleteProperty(t,e);return s&&n&&G(t,"delete",e,void 0,o),s},has:function(t,e){const n=Reflect.has(t,e);return y(e)&&J.has(e)||B(t,"has",e),n},ownKeys:function(t){return B(t,"iterate",g(t)?"length":T),Reflect.ownKeys(t)}},ot={get:Q,set:(t,e)=>("production"!==process.env.NODE_ENV&&console.warn(`Set operation on key "${String(e)}" failed: target is readonly.`,t),!0),deleteProperty:(t,e)=>("production"!==process.env.NODE_ENV&&console.warn(`Delete operation on key "${String(e)}" failed: target is readonly.`,t),!0)},st=p({},ot,{get:X}),rt=t=>t,it=t=>Reflect.getPrototypeOf(t);function ct(t,e,n=!1,o=!1){const s=At(t=t.__v_raw),r=At(e);e!==r&&!n&&B(s,"get",e),!n&&B(s,"get",r);const{has:i}=it(s),c=o?rt:n?Lt:Wt;return i.call(s,e)?c(t.get(e)):i.call(s,r)?c(t.get(r)):void(t!==s&&t.get(e))}function at(t,e=!1){const n=this.__v_raw,o=At(n),s=At(t);return t!==s&&!e&&B(o,"has",t),!e&&B(o,"has",s),t===s?n.has(t):n.has(t)||n.has(s)}function ut(t,e=!1){return t=t.__v_raw,!e&&B(At(t),"iterate",T),Reflect.get(t,"size",t)}function lt(t){t=At(t);const e=At(this);return it(e).has.call(e,t)||(e.add(t),G(e,"add",t,t)),this}function ht(t,e){e=At(e);const n=At(this),{has:o,get:s}=it(n);let r=o.call(n,t);r?"production"!==process.env.NODE_ENV&&Ot(n,o,t):(t=At(t),r=o.call(n,t));const i=s.call(n,t);return n.set(t,e),r?O(e,i)&&G(n,"set",t,e,i):G(n,"add",t,e),this}function pt(t){const e=At(this),{has:n,get:o}=it(e);let s=n.call(e,t);s?"production"!==process.env.NODE_ENV&&Ot(e,n,t):(t=At(t),s=n.call(e,t));const r=o?o.call(e,t):void 0,i=e.delete(t);return s&&G(e,"delete",t,void 0,r),i}function dt(){const t=At(this),e=0!==t.size,n="production"!==process.env.NODE_ENV?_(t)?new Map(t):new Set(t):void 0,o=t.clear();return e&&G(t,"clear",void 0,void 0,n),o}function ft(t,e){return function(n,o){const s=this,r=s.__v_raw,i=At(r),c=e?rt:t?Lt:Wt;return!t&&B(i,"iterate",T),r.forEach((t,e)=>n.call(o,c(t),c(e),s))}}function gt(t,e,n){return function(...o){const s=this.__v_raw,r=At(s),i=_(r),c="entries"===t||t===Symbol.iterator&&i,a="keys"===t&&i,u=s[t](...o),l=n?rt:e?Lt:Wt;return!e&&B(r,"iterate",a?z:T),{next(){const{value:t,done:e}=u.next();return e?{value:t,done:e}:{value:c?[l(t[0]),l(t[1])]:l(t),done:e}},[Symbol.iterator](){return this}}}}function _t(t){return function(...e){if("production"!==process.env.NODE_ENV){const n=e[0]?`on key "${e[0]}" `:"";console.warn(`${x(t)} operation ${n}failed: target is readonly.`,At(this))}return"delete"!==t&&this}}function vt(){const t={get(t){return ct(this,t)},get size(){return ut(this)},has:at,add:lt,set:ht,delete:pt,clear:dt,forEach:ft(!1,!1)},e={get(t){return ct(this,t,!1,!0)},get size(){return ut(this)},has:at,add:lt,set:ht,delete:pt,clear:dt,forEach:ft(!1,!0)},n={get(t){return ct(this,t,!0)},get size(){return ut(this,!0)},has(t){return at.call(this,t,!0)},add:_t("add"),set:_t("set"),delete:_t("delete"),clear:_t("clear"),forEach:ft(!0,!1)},o={get(t){return ct(this,t,!0,!0)},get size(){return ut(this,!0)},has(t){return at.call(this,t,!0)},add:_t("add"),set:_t("set"),delete:_t("delete"),clear:_t("clear"),forEach:ft(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=gt(s,!1,!1),n[s]=gt(s,!0,!1),e[s]=gt(s,!1,!0),o[s]=gt(s,!0,!0)}),[t,n,e,o]}const[mt,yt,wt,bt]=vt();function Nt(t,e){const n=e?t?bt:wt:t?yt:mt;return(e,o,s)=>"__v_isReactive"===o?!t:"__v_isReadonly"===o?t:"__v_raw"===o?e:Reflect.get(f(n,o)&&o in e?n:e,o,s)}const Et={get:Nt(!1,!1)},kt={get:Nt(!0,!1)},xt={get:Nt(!0,!0)};function Ot(t,e,n){const o=At(n);if(o!==n&&e.call(t,o)){const e=E(t);console.warn(`Reactive ${e} contains both the raw and reactive versions of the same object${"Map"===e?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const St=new WeakMap,Vt=new WeakMap,Rt=new WeakMap,$t=new WeakMap;function Dt(t){return Tt(t)?t:jt(t,!1,nt,Et,St)}function Mt(t){return jt(t,!0,ot,kt,Rt)}function Ct(t){return jt(t,!0,st,xt,$t)}function jt(t,e,n,o,s){if(!w(t))return"production"!==process.env.NODE_ENV&&console.warn("value cannot be made reactive: "+String(t)),t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const r=s.get(t);if(r)return r;const i=(c=t).__v_skip||!Object.isExtensible(c)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(E(c));var c;if(0===i)return t;const a=new Proxy(t,2===i?o:n);return s.set(t,a),a}function Pt(t){return Tt(t)?Pt(t.__v_raw):!(!t||!t.__v_isReactive)}function Tt(t){return!(!t||!t.__v_isReadonly)}function zt(t){return!(!t||!t.__v_isShallow)}function It(t){return Pt(t)||Tt(t)}function At(t){const e=t&&t.__v_raw;return e?At(e):t}function Ft(t){return((t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})})(t,"__v_skip",!0),t}const Wt=t=>w(t)?Dt(t):t,Lt=t=>w(t)?Mt(t):t;function Ut(t){return Boolean(t&&!0===t.__v_isRef)}const Bt={get:(t,e,n)=>{return Ut(o=Reflect.get(t,e,n))?o.value:o;var o},set:(t,e,n,o)=>{const s=t[e];return Ut(s)&&!Ut(n)?(s.value=n,!0):Reflect.set(t,e,n,o)}};const Gt=[];function qt(t,...e){L();const n=Gt.length?Gt[Gt.length-1].component:null,o=n&&n.appContext.config.warnHandler,s=function(){let t=Gt[Gt.length-1];if(!t)return[];const e=[];for(;t;){const n=e[0];n&&n.vnode===t?n.recurseCount++:e.push({vnode:t,recurseCount:0});const o=t.component&&t.component.parent;t=o&&o.vnode}return e}();if(o)Kt(o,n,11,[t+e.join(""),n&&n.proxy,s.map(({vnode:t})=>`at <${nn(n,t.type)}>`).join("\n"),s]);else{const n=["[Vue warn]: "+t,...e];s.length&&n.push("\n",...function(t){const e=[];return t.forEach((t,n)=>{e.push(...0===n?[]:["\n"],...function({vnode:t,recurseCount:e}){const n=e>0?`... (${e} recursive calls)`:"",o=!!t.component&&null==t.component.parent,s=" at <"+nn(t.component,t.type,o),r=">"+n;return t.props?[s,...Ht(t.props),r]:[s+r]}(t))}),e}(s)),console.warn(...n)}U()}function Ht(t){const e=[],n=Object.keys(t);return n.slice(0,3).forEach(n=>{e.push(...function t(e,n,o){return m(n)?(n=JSON.stringify(n),o?n:[`${e}=${n}`]):"number"==typeof n||"boolean"==typeof n||null==n?o?n:[`${e}=${n}`]:Ut(n)?(n=t(e,At(n.value),!0),o?n:[e+"=Ref<",n,">"]):v(n)?[`${e}=fn${n.name?`<${n.name}>`:""}`]:(n=At(n),o?n:[e+"=",n])}(n,t[n]))}),n.length>3&&e.push(" ..."),e}const Jt={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/core"};function Kt(t,e,n,o){let s;try{s=o?t(...o):t()}catch(t){Xt(t,e,n)}return s}function Qt(t,e,n,o){if(v(t)){const r=Kt(t,e,n,o);return r&&(w(s=r)&&v(s.then)&&v(s.catch))&&r.catch(t=>{Xt(t,e,n)}),r}var s;const r=[];for(let s=0;s<t.length;s++)r.push(Qt(t[s],e,n,o));return r}function Xt(t,e,n,o=!0){const s=e?e.vnode:null;if(e){let o=e.parent;const s=e.proxy,r="production"!==process.env.NODE_ENV?Jt[n]:n;for(;o;){const e=o.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,s,r))return;o=o.parent}const i=e.appContext.config.errorHandler;if(i)return void Kt(i,null,10,[t,s,r])}!function(t,e,n,o=!0){if("production"!==process.env.NODE_ENV){const r=Jt[e];if(n&&(s=n,Gt.push(s)),qt("Unhandled error"+(r?" during execution of "+r:"")),n&&Gt.pop(),o)throw t;console.error(t)}else console.error(t);var s}(t,n,s,o)}let Yt=!1,Zt=!1;const te=[];let ee=0;const ne=[];let oe=null,se=0;const re=[];let ie=null,ce=0;const ae=Promise.resolve();let ue=null,le=null;function he(t){const e=ue||ae;return t?e.then(this?t.bind(this):t):e}function pe(t){te.length&&te.includes(t,Yt&&t.allowRecurse?ee+1:ee)||t===le||(null==t.id?te.push(t):te.splice(function(t){let e=ee+1,n=te.length;for(;e<n;){const o=e+n>>>1;_e(te[o])<t?e=o+1:n=o}return e}(t.id),0,t),de())}function de(){Yt||Zt||(Zt=!0,ue=ae.then(ve))}function fe(t,e,n,o){g(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?o+1:o)||n.push(t),de()}function ge(t){fe(t,ie,re,ce)}const _e=t=>null==t.id?1/0:t.id;function ve(t){Zt=!1,Yt=!0,"production"!==process.env.NODE_ENV&&(t=t||new Map),function t(e,n=null){if(ne.length){for(le=n,oe=[...new Set(ne)],ne.length=0,"production"!==process.env.NODE_ENV&&(e=e||new Map),se=0;se<oe.length;se++)"production"!==process.env.NODE_ENV&&me(e,oe[se])||oe[se]();oe=null,se=0,le=null,t(e,n)}}(t),te.sort((t,e)=>_e(t)-_e(e));const e="production"!==process.env.NODE_ENV?e=>me(t,e):u;try{for(ee=0;ee<te.length;ee++){const t=te[ee];if(t&&!1!==t.active){if("production"!==process.env.NODE_ENV&&e(t))continue;Kt(t,null,14)}}}finally{ee=0,te.length=0,function(t){if(re.length){const e=[...new Set(re)];if(re.length=0,ie)return void ie.push(...e);for(ie=e,"production"!==process.env.NODE_ENV&&(t=t||new Map),ie.sort((t,e)=>_e(t)-_e(e)),ce=0;ce<ie.length;ce++)"production"!==process.env.NODE_ENV&&me(t,ie[ce])||ie[ce]();ie=null,ce=0}}(t),Yt=!1,ue=null,(te.length||ne.length||re.length)&&ve(t)}}function me(t,e){if(t.has(e)){const n=t.get(e);if(n>100){const t=e.ownerInstance,n=t&&en(t.type);return qt(`Maximum recursive updates exceeded${n?` in component <${n}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`),!0}t.set(e,n+1)}else t.set(e,1)}const ye=new Set;"production"!==process.env.NODE_ENV&&((S||(S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})).__VUE_HMR_RUNTIME__={createRecord:Ee((function(t,e){if(we.has(t))return!1;return we.set(t,{initialDef:be(e),instances:new Set}),!0})),rerender:Ee((function(t,e){const n=we.get(t);if(!n)return;n.initialDef.render=e,[...n.instances].forEach(t=>{e&&(t.render=e,be(t.type).render=e),t.renderCache=[],t.update()})})),reload:Ee((function(t,e){const n=we.get(t);if(!n)return;e=be(e),Ne(n.initialDef,e);const o=[...n.instances];for(const t of o){const o=be(t.type);ye.has(o)||(o!==n.initialDef&&Ne(o,e),ye.add(o)),t.appContext.optionsCache.delete(t.type),t.ceReload?(ye.add(o),t.ceReload(e.styles),ye.delete(o)):t.parent?(pe(t.parent.update),t.parent.type.__asyncLoader&&t.parent.ceReload&&t.parent.ceReload(e.styles)):t.appContext.reload?t.appContext.reload():"undefined"!=typeof window?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required.")}ge(()=>{for(const t of o)ye.delete(be(t.type))})}))});const we=new Map;function be(t){return on(t)?t.__vccOpts:t}function Ne(t,e){p(t,e);for(const n in t)"__file"===n||n in e||delete t[n]}function Ee(t){return(e,n)=>{try{return t(e,n)}catch(t){console.error(t),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}const ke={};function xe(t,e,{immediate:n,deep:o,flush:s,onTrack:r,onTrigger:i}=a){"production"===process.env.NODE_ENV||e||(void 0!==n&&qt('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),void 0!==o&&qt('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'));const c=t=>{qt("Invalid watch source: ",t,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},l=Xe;let h,p,d=!1,f=!1;if(Ut(t)?(h=()=>t.value,d=zt(t)):Pt(t)?(h=()=>t,o=!0):g(t)?(f=!0,d=t.some(Pt),h=()=>t.map(t=>Ut(t)?t.value:Pt(t)?Se(t):v(t)?Kt(t,l,2):void("production"!==process.env.NODE_ENV&&c(t)))):v(t)?h=e?()=>Kt(t,l,2):()=>{if(!l||!l.isUnmounted)return p&&p(),Qt(t,l,3,[_])}:(h=u,"production"!==process.env.NODE_ENV&&c(t)),e&&o){const t=h;h=()=>Se(t())}let _=t=>{p=b.onStop=()=>{Kt(t,l,4)}},m=f?[]:ke;const y=()=>{if(b.active)if(e){const t=b.run();(o||d||(f?t.some((t,e)=>O(t,m[e])):O(t,m)))&&(p&&p(),Qt(e,l,3,[t,m===ke?void 0:m,_]),m=t)}else b.run()};let w;y.allowRecurse=!!e,w="sync"===s?y:"post"===s?()=>Pe(y,l&&l.suspense):()=>{!l||l.isMounted?function(t){fe(t,oe,ne,se)}(y):y()};const b=new I(h,w);return"production"!==process.env.NODE_ENV&&(b.onTrack=r,b.onTrigger=i),e?n?y():m=b.run():"post"===s?Pe(b.run.bind(b),l&&l.suspense):b.run(),()=>{b.stop(),l&&l.scope&&((t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)})(l.scope.effects,b)}}function Oe(t,e,n){const o=this.proxy,s=m(t)?t.includes(".")?function(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}(o,t):()=>o[t]:t.bind(o,o);let r;v(e)?r=e:(r=e.handler,n=e);const i=Xe;Ye(this);const c=xe(s,r.bind(o),n);return i?Ye(i):Ze(),c}function Se(t,e){if(!w(t)||t.__v_skip)return t;if((e=e||new Set).has(t))return t;if(e.add(t),Ut(t))Se(t.value,e);else if(g(t))for(let n=0;n<t.length;n++)Se(t[n],e);else if("[object Set]"===N(t)||_(t))t.forEach(t=>{Se(t,e)});else if((t=>"[object Object]"===N(t))(t))for(const n in t)Se(t[n],e);return t}function Ve(t){return v(t)?{setup:t,name:t.name}:t}function Re(t,e,n,o=!1){const{mixins:s,extends:r}=e;r&&Re(t,r,n,!0),s&&s.forEach(e=>Re(t,e,n,!0));for(const s in e)if(o&&"expose"===s)"production"!==process.env.NODE_ENV&&qt('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const o=$e[s]||n&&n[s];t[s]=o?o(t[s],e[s]):e[s]}return t}const $e={data:De,props:je,emits:je,methods:je,computed:je,beforeCreate:Ce,created:Ce,beforeMount:Ce,mounted:Ce,beforeUpdate:Ce,updated:Ce,beforeDestroy:Ce,beforeUnmount:Ce,destroyed:Ce,unmounted:Ce,activated:Ce,deactivated:Ce,errorCaptured:Ce,serverPrefetch:Ce,components:je,directives:je,watch:function(t,e){if(!t)return e;if(!e)return t;const n=p(Object.create(null),t);for(const o in e)n[o]=Ce(t[o],e[o]);return n},provide:De,inject:function(t,e){return je(Me(t),Me(e))}};function De(t,e){return e?t?function(){return p(v(t)?t.call(this,this):t,v(e)?e.call(this,this):e)}:e:t}function Me(t){if(g(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ce(t,e){return t?[...new Set([].concat(t,e))]:e}function je(t,e){return t?p(p(Object.create(null),t),e):e}const Pe=function(t,e){e&&e.pendingBranch?g(t)?e.effects.push(...t):e.effects.push(t):ge(t)},Te=Symbol(),ze=Symbol("production"!==process.env.NODE_ENV?"Fragment":void 0),Ie=Symbol("production"!==process.env.NODE_ENV?"Text":void 0),Ae=Symbol("production"!==process.env.NODE_ENV?"Comment":void 0);Symbol("production"!==process.env.NODE_ENV?"Static":void 0);function Fe(t){return!!t&&!0===t.__v_isVNode}const We=({key:t})=>null!=t?t:null,Le=({ref:t,ref_key:e,ref_for:n})=>null!=t?m(t)||Ut(t)||v(t)?{i:null,r:t,k:e,f:!!n}:t:null;const Ue="production"!==process.env.NODE_ENV?(...t)=>Be(...t):Be;function Be(t,e=null,n=null,s=0,r=null,i=!1){if(t&&t!==Te||("production"===process.env.NODE_ENV||t||qt(`Invalid vnode type when creating vnode: ${t}.`),t=Ae),Fe(t)){const o=Ge(t,e,!0);return n&&Je(o,n),o}if(on(t)&&(t=t.__vccOpts),e){e=function(t){return t?It(t)||"__vInternal"in t?p({},t):t:null}(e);let{class:t,style:n}=e;t&&!m(t)&&(e.class=c(t)),w(n)&&(It(n)&&!g(n)&&(n=p({},n)),e.style=o(n))}const a=m(t)?1:(t=>t.__isSuspense)(t)?128:(t=>t.__isTeleport)(t)?64:w(t)?4:v(t)?2:0;return"production"!==process.env.NODE_ENV&&4&a&&It(t)&&qt("Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.","\nComponent that was made reactive: ",t=At(t)),function(t,e=null,n=null,o=0,s=null,r=(t===ze?0:1),i=!1,c=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&We(e),ref:e&&Le(e),scopeId:null,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:o,dynamicProps:s,dynamicChildren:null,appContext:null};return c?(Je(a,n),128&r&&t.normalize(a)):n&&(a.shapeFlag|=m(n)?8:16),"production"!==process.env.NODE_ENV&&a.key!=a.key&&qt("VNode created with invalid key (NaN). VNode type:",a.type),a}(t,e,n,s,r,a,i,!0)}function Ge(t,e,n=!1){const{props:s,ref:r,patchFlag:i,children:a}=t,u=e?function(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const t in s)if("class"===t)e.class!==s.class&&(e.class=c([e.class,s.class]));else if("style"===t)e.style=o([e.style,s.style]);else if(h(t)){const n=e[t],o=s[t];!o||n===o||g(n)&&n.includes(o)||(e[t]=n?[].concat(n,o):o)}else""!==t&&(e[t]=s[t])}return e}(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&We(u),ref:e&&e.ref?n&&r?g(r)?r.concat(Le(e)):[r,Le(e)]:Le(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:"production"!==process.env.NODE_ENV&&-1===i&&g(a)?a.map(qe):a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ze?-1===i?16:16|i:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ge(t.ssContent),ssFallback:t.ssFallback&&Ge(t.ssFallback),el:t.el,anchor:t.anchor}}function qe(t){const e=Ge(t);return g(t.children)&&(e.children=t.children.map(qe)),e}function He(t=" ",e=0){return Ue(Ie,null,t,e)}function Je(t,e){let n=0;const{shapeFlag:o}=t;if(null==e)e=null;else if(g(e))n=16;else if("object"==typeof e){if(65&o){const n=e.default;return void(n&&(n._c&&(n._d=!1),Je(t,n()),n._c&&(n._d=!0)))}{n=32;const t=e._;t||"__vInternal"in e||(e._ctx=null)}}else v(e)?(e={default:e,_ctx:null},n=32):(e=String(e),64&o?(n=16,e=[He(e)]):n=8);t.children=e,t.shapeFlag|=n}const Ke=t=>t?4&t.vnode.shapeFlag?function(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Pt(e=Ft(t.exposed))?e:new Proxy(e,Bt),{get:(e,n)=>n in e?e[n]:n in Qe?Qe[n](t):void 0}));var e}(t)||t.proxy:Ke(t.parent):null,Qe=p(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>"production"!==process.env.NODE_ENV?Ct(t.props):t.props,$attrs:t=>"production"!==process.env.NODE_ENV?Ct(t.attrs):t.attrs,$slots:t=>"production"!==process.env.NODE_ENV?Ct(t.slots):t.slots,$refs:t=>"production"!==process.env.NODE_ENV?Ct(t.refs):t.refs,$parent:t=>Ke(t.parent),$root:t=>Ke(t.root),$emit:t=>t.emit,$options:t=>__VUE_OPTIONS_API__?function(t){const e=t.type,{mixins:n,extends:o}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:i}}=t.appContext,c=r.get(e);let a;return c?a=c:s.length||n||o?(a={},s.length&&s.forEach(t=>Re(a,t,i,!0)),Re(a,e,i)):a=e,r.set(e,a),a}(t):t.type,$forceUpdate:t=>()=>pe(t.update),$nextTick:t=>he.bind(t.proxy),$watch:t=>__VUE_OPTIONS_API__?Oe.bind(t):u});process.env.NODE_ENV;let Xe=null;const Ye=t=>{Xe=t,t.scope.on()},Ze=()=>{Xe&&Xe.scope.off(),Xe=null};const tn=/(?:^|[-_])(\w)/g;function en(t){return v(t)&&t.displayName||t.name}function nn(t,e,n=!1){let o=en(e);if(!o&&e.__file){const t=e.__file.match(/([^/\\]+)\.\w+$/);t&&(o=t[1])}if(!o&&t&&t.parent){const n=t=>{for(const n in t)if(t[n]===e)return n};o=n(t.components||t.parent.type.components)||n(t.appContext.components)}return o?o.replace(tn,t=>t.toUpperCase()).replace(/[-_]/g,""):n?"App":"Anonymous"}function on(t){return v(t)&&"__vccOpts"in t}function sn(t,e,n){const o=arguments.length;return 2===o?w(e)&&!g(e)?Fe(e)?Ue(t,null,[e]):Ue(t,e):Ue(t,null,e):(o>3?n=Array.prototype.slice.call(arguments,2):3===o&&Fe(n)&&(n=[n]),Ue(t,e,n))}Symbol("production"!==process.env.NODE_ENV?"ssrContext":"");function rn(t){return!(!t||!t.__v_isShallow)}"production"!==process.env.NODE_ENV&&function(){if("production"===process.env.NODE_ENV||"undefined"==typeof window)return;const t={style:"color:#3ba776"},e={style:"color:#0b1bc9"},n={style:"color:#b62e24"},o={style:"color:#9d288c"},s={header:e=>{return w(e)?e.__isVue?["div",t,"VueInstance"]:Ut(e)?["div",{},["span",t,(n=e,rn(n)?"ShallowRef":n.effect?"ComputedRef":"Ref")],"<",c(e.value),">"]:Pt(e)?["div",{},["span",t,rn(e)?"ShallowReactive":"Reactive"],"<",c(e),">"+(Tt(e)?" (readonly)":"")]:Tt(e)?["div",{},["span",t,rn(e)?"ShallowReadonly":"Readonly"],"<",c(e),">"]:null:null;var n},hasBody:t=>t&&t.__isVue,body(t){if(t&&t.__isVue)return["div",{},...r(t.$)]}};function r(t){const e=[];t.type.props&&t.props&&e.push(i("props",At(t.props))),t.setupState!==a&&e.push(i("setup",t.setupState)),t.data!==a&&e.push(i("data",At(t.data)));const n=u(t,"computed");n&&e.push(i("computed",n));const s=u(t,"inject");return s&&e.push(i("injected",s)),e.push(["div",{},["span",{style:o.style+";opacity:0.66"},"$ (internal): "],["object",{object:t}]]),e}function i(t,e){return e=p({},e),Object.keys(e).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},t],["div",{style:"padding-left:1.25em"},...Object.keys(e).map(t=>["div",{},["span",o,t+": "],c(e[t],!1)])]]:["span",{}]}function c(t,s=!0){return"number"==typeof t?["span",e,t]:"string"==typeof t?["span",n,JSON.stringify(t)]:"boolean"==typeof t?["span",o,t]:w(t)?["object",{object:s?At(t):t}]:["span",n,String(t)]}function u(t,e){const n=t.type;if(v(n))return;const o={};for(const s in t.ctx)l(n,s,e)&&(o[s]=t.ctx[s]);return o}function l(t,e,n){const o=t[n];return!!(g(o)&&o.includes(e)||w(o)&&e in o)||!(!t.extends||!l(t.extends,e,n))||!(!t.mixins||!t.mixins.some(t=>l(t,e,n)))||void 0}window.devtoolsFormatters?window.devtoolsFormatters.push(s):window.devtoolsFormatters=[s]}();const cn="http://www.w3.org/2000/svg";class an{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}function un(t,e,n,o,s){return{type:"path",ops:_n(t,e,n,o,s)}}function ln(t,e,n){const o=(t||[]).length;if(o>2){const s=[];for(let e=0;e<o-1;e++)s.push(..._n(t[e][0],t[e][1],t[e+1][0],t[e+1][1],n));return e&&s.push(..._n(t[o-1][0],t[o-1][1],t[0][0],t[0][1],n)),{type:"path",ops:s}}return 2===o?un(t[0][0],t[0][1],t[1][0],t[1][1],n):{type:"path",ops:[]}}function hn(t,e,n,o,s){return function(t,e){return ln(t,!0,e)}([[t,e],[t+n,e],[t+n,e+o],[t,e+o]],s)}function pn(t,e,n,o,s){return function(t,e,n,o){const[s,r]=yn(o.increment,t,e,o.rx,o.ry,1,o.increment*fn(.1,fn(.4,1,n),n),n);let i=mn(s,null,n);if(!n.disableMultiStroke){const[s]=yn(o.increment,t,e,o.rx,o.ry,1.5,0,n),r=mn(s,null,n);i=i.concat(r)}return{estimatedPoints:r,opset:{type:"path",ops:i}}}(t,e,s,function(t,e,n){const o=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),s=Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*o),r=2*Math.PI/s;let i=Math.abs(t/2),c=Math.abs(e/2);const a=1-n.curveFitting;return i+=gn(i*a,n),c+=gn(c*a,n),{increment:r,rx:i,ry:c}}(n,o,s)).opset}function dn(t){return t.randomizer||(t.randomizer=new an(t.seed||0)),t.randomizer.next()}function fn(t,e,n,o=1){return n.roughness*o*(dn(n)*(e-t)+t)}function gn(t,e,n=1){return fn(-t,t,e,n)}function _n(t,e,n,o,s,r=!1){const i=r?s.disableMultiStrokeFill:s.disableMultiStroke,c=vn(t,e,n,o,s,!0,!1);if(i)return c;const a=vn(t,e,n,o,s,!0,!0);return c.concat(a)}function vn(t,e,n,o,s,r,i){const c=Math.pow(t-n,2)+Math.pow(e-o,2),a=Math.sqrt(c);let u=1;u=a<200?1:a>500?.4:-.0016668*a+1.233334;let l=s.maxRandomnessOffset||0;l*l*100>c&&(l=a/10);const h=l/2,p=.2+.2*dn(s);let d=s.bowing*s.maxRandomnessOffset*(o-e)/200,f=s.bowing*s.maxRandomnessOffset*(t-n)/200;d=gn(d,s,u),f=gn(f,s,u);const g=[],_=()=>gn(h,s,u),v=()=>gn(l,s,u);return r&&(i?g.push({op:"move",data:[t+_(),e+_()]}):g.push({op:"move",data:[t+gn(l,s,u),e+gn(l,s,u)]})),i?g.push({op:"bcurveTo",data:[d+t+(n-t)*p+_(),f+e+(o-e)*p+_(),d+t+2*(n-t)*p+_(),f+e+2*(o-e)*p+_(),n+_(),o+_()]}):g.push({op:"bcurveTo",data:[d+t+(n-t)*p+v(),f+e+(o-e)*p+v(),d+t+2*(n-t)*p+v(),f+e+2*(o-e)*p+v(),n+v(),o+v()]}),g}function mn(t,e,n){const o=t.length,s=[];if(o>3){const r=[],i=1-n.curveTightness;s.push({op:"move",data:[t[1][0],t[1][1]]});for(let e=1;e+2<o;e++){const n=t[e];r[0]=[n[0],n[1]],r[1]=[n[0]+(i*t[e+1][0]-i*t[e-1][0])/6,n[1]+(i*t[e+1][1]-i*t[e-1][1])/6],r[2]=[t[e+1][0]+(i*t[e][0]-i*t[e+2][0])/6,t[e+1][1]+(i*t[e][1]-i*t[e+2][1])/6],r[3]=[t[e+1][0],t[e+1][1]],s.push({op:"bcurveTo",data:[r[1][0],r[1][1],r[2][0],r[2][1],r[3][0],r[3][1]]})}if(e&&2===e.length){const t=n.maxRandomnessOffset;s.push({op:"lineTo",data:[e[0]+gn(t,n),e[1]+gn(t,n)]})}}else 3===o?(s.push({op:"move",data:[t[1][0],t[1][1]]}),s.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===o&&s.push(..._n(t[0][0],t[0][1],t[1][0],t[1][1],n));return s}function yn(t,e,n,o,s,r,i,c){const a=[],u=[],l=gn(.5,c)-Math.PI/2;u.push([gn(r,c)+e+.9*o*Math.cos(l-t),gn(r,c)+n+.9*s*Math.sin(l-t)]);for(let i=l;i<2*Math.PI+l-.01;i+=t){const t=[gn(r,c)+e+o*Math.cos(i),gn(r,c)+n+s*Math.sin(i)];a.push(t),u.push(t)}return u.push([gn(r,c)+e+o*Math.cos(l+2*Math.PI+.5*i),gn(r,c)+n+s*Math.sin(l+2*Math.PI+.5*i)]),u.push([gn(r,c)+e+.98*o*Math.cos(l+i),gn(r,c)+n+.98*s*Math.sin(l+i)]),u.push([gn(r,c)+e+.9*o*Math.cos(l+.5*i),gn(r,c)+n+.9*s*Math.sin(l+.5*i)]),[u,a]}function wn(t,e){return{maxRandomnessOffset:2,roughness:"highlight"===t?3:1.5,bowing:1,stroke:"#000",strokeWidth:1.5,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,combineNestedSvgPaths:!1,disableMultiStroke:"double"!==t,disableMultiStrokeFill:!1,seed:e}}function bn(t,e,n,o,s,r){const i=[];let c=n.strokeWidth||2;const a=function(t){const e=t.padding;if(e||0===e){if("number"==typeof e)return[e,e,e,e];if(Array.isArray(e)){const t=e;if(t.length)switch(t.length){case 4:return[...t];case 1:return[t[0],t[0],t[0],t[0]];case 2:return[...t,...t];case 3:return[...t,t[1]];default:return[t[0],t[1],t[2],t[3]]}}}return[5,5,5,5]}(n),u=void 0===n.animate||!!n.animate,l=n.iterations||2,h=wn("single",r);switch(n.type){case"underline":{const t=e.y+e.h+a[2];for(let n=0;n<l;n++)n%2?i.push(un(e.x+e.w,t,e.x,t,h)):i.push(un(e.x,t,e.x+e.w,t,h));break}case"strike-through":{const t=e.y+e.h/2;for(let n=0;n<l;n++)n%2?i.push(un(e.x+e.w,t,e.x,t,h)):i.push(un(e.x,t,e.x+e.w,t,h));break}case"box":{const t=e.x-a[3],n=e.y-a[0],o=e.w+(a[1]+a[3]),s=e.h+(a[0]+a[2]);for(let e=0;e<l;e++)i.push(hn(t,n,o,s,h));break}case"bracket":{const t=Array.isArray(n.brackets)?n.brackets:n.brackets?[n.brackets]:["right"],o=e.x-2*a[3],s=e.x+e.w+2*a[1],r=e.y-2*a[0],c=e.y+e.h+2*a[2];for(const n of t){let t;switch(n){case"bottom":t=[[o,e.y+e.h],[o,c],[s,c],[s,e.y+e.h]];break;case"top":t=[[o,e.y],[o,r],[s,r],[s,e.y]];break;case"left":t=[[e.x,r],[o,r],[o,c],[e.x,c]];break;case"right":t=[[e.x+e.w,r],[s,r],[s,c],[e.x+e.w,c]]}t&&i.push(ln(t,!1,h))}break}case"crossed-off":{const t=e.x,n=e.y,o=t+e.w,s=n+e.h;for(let e=0;e<l;e++)e%2?i.push(un(o,s,t,n,h)):i.push(un(t,n,o,s,h));for(let e=0;e<l;e++)e%2?i.push(un(t,s,o,n,h)):i.push(un(o,n,t,s,h));break}case"circle":{const t=wn("double",r),n=e.w+(a[1]+a[3]),o=e.h+(a[0]+a[2]),s=e.x-a[3]+n/2,c=e.y-a[0]+o/2,u=Math.floor(l/2),p=l-2*u;for(let e=0;e<u;e++)i.push(pn(s,c,n,o,t));for(let t=0;t<p;t++)i.push(pn(s,c,n,o,h));break}case"highlight":{const t=wn("highlight",r);c=.95*e.h;const n=e.y+e.h/2;for(let o=0;o<l;o++)o%2?i.push(un(e.x+e.w,n,e.x,n,t)):i.push(un(e.x,n,e.x+e.w,n,t));break}}if(i.length){const e=function(t){const e=[];for(const n of t){let t="";for(const o of n.ops){const n=o.data;switch(o.op){case"move":t.trim()&&e.push(t.trim()),t=`M${n[0]} ${n[1]} `;break;case"bcurveTo":t+=`C${n[0]} ${n[1]}, ${n[2]} ${n[3]}, ${n[4]} ${n[5]} `;break;case"lineTo":t+=`L${n[0]} ${n[1]} `}}t.trim()&&e.push(t.trim())}return e}(i),r=[],a=[];let l=0;const h=(t,e,n)=>t.setAttribute(e,n);for(const o of e){const e=document.createElementNS(cn,"path");if(h(e,"d",o),h(e,"fill","none"),h(e,"stroke",n.color||"currentColor"),h(e,"stroke-width",""+c),u){const t=e.getTotalLength();r.push(t),l+=t}t.appendChild(e),a.push(e)}if(u){let t=0;for(let e=0;e<a.length;e++){const n=a[e],i=r[e],c=l?s*(i/l):0,u=o+t,h=n.style;h.strokeDashoffset=""+i,h.strokeDasharray=""+i,h.animation=`rough-notation-dash ${c}ms ease-out ${u}ms forwards`,t+=c}}}}class Nn{constructor(t,e){this._state="unattached",this._resizing=!1,this._seed=Math.floor(Math.random()*2**31),this._lastSizes=[],this._animationDelay=0,this._resizeListener=()=>{this._resizing||(this._resizing=!0,setTimeout(()=>{this._resizing=!1,"showing"===this._state&&this.haveRectsChanged()&&this.show()},400))},this._e=t,this._config=JSON.parse(JSON.stringify(e)),this.attach()}get animate(){return this._config.animate}set animate(t){this._config.animate=t}get animationDuration(){return this._config.animationDuration}set animationDuration(t){this._config.animationDuration=t}get iterations(){return this._config.iterations}set iterations(t){this._config.iterations=t}get color(){return this._config.color}set color(t){this._config.color!==t&&(this._config.color=t,this.refresh())}get strokeWidth(){return this._config.strokeWidth}set strokeWidth(t){this._config.strokeWidth!==t&&(this._config.strokeWidth=t,this.refresh())}get padding(){return this._config.padding}set padding(t){this._config.padding!==t&&(this._config.padding=t,this.refresh())}attach(){if("unattached"===this._state&&this._e.parentElement){!function(){if(!window.__rno_kf_s){const t=window.__rno_kf_s=document.createElement("style");t.textContent="@keyframes rough-notation-dash { to { stroke-dashoffset: 0; } }",document.head.appendChild(t)}}();const t=this._svg=document.createElementNS(cn,"svg");t.setAttribute("class","rough-annotation");const e=t.style;e.position="absolute",e.top="0",e.left="0",e.overflow="visible",e.pointerEvents="none",e.width="100px",e.height="100px";const n="highlight"===this._config.type;if(this._e.insertAdjacentElement(n?"beforebegin":"afterend",t),this._state="not-showing",n){const t=window.getComputedStyle(this._e).position;(!t||"static"===t)&&(this._e.style.position="relative")}this.attachListeners()}}detachListeners(){window.removeEventListener("resize",this._resizeListener),this._ro&&this._ro.unobserve(this._e)}attachListeners(){this.detachListeners(),window.addEventListener("resize",this._resizeListener,{passive:!0}),!this._ro&&"ResizeObserver"in window&&(this._ro=new window.ResizeObserver(t=>{for(const e of t)e.contentRect&&this._resizeListener()})),this._ro&&this._ro.observe(this._e)}haveRectsChanged(){if(this._lastSizes.length){const t=this.rects();if(t.length!==this._lastSizes.length)return!0;for(let e=0;e<t.length;e++)if(!this.isSameRect(t[e],this._lastSizes[e]))return!0}return!1}isSameRect(t,e){const n=(t,e)=>Math.round(t)===Math.round(e);return n(t.x,e.x)&&n(t.y,e.y)&&n(t.w,e.w)&&n(t.h,e.h)}isShowing(){return"not-showing"!==this._state}refresh(){this.isShowing()&&!this.pendingRefresh&&(this.pendingRefresh=Promise.resolve().then(()=>{this.isShowing()&&this.show(),delete this.pendingRefresh}))}show(){switch(this._state){case"unattached":break;case"showing":this.hide(),this._svg&&this.render(this._svg,!0);break;case"not-showing":this.attach(),this._svg&&this.render(this._svg,!1)}}hide(){if(this._svg)for(;this._svg.lastChild;)this._svg.removeChild(this._svg.lastChild);this._state="not-showing"}remove(){this._svg&&this._svg.parentElement&&this._svg.parentElement.removeChild(this._svg),this._svg=void 0,this._state="unattached",this.detachListeners()}render(t,e){let n=this._config;e&&(n=JSON.parse(JSON.stringify(this._config)),n.animate=!1);const o=this.rects();let s=0;o.forEach(t=>s+=t.w);const r=n.animationDuration||800;let i=0;for(let e=0;e<o.length;e++){const c=r*(o[e].w/s);bn(t,o[e],n,i+this._animationDelay,c,this._seed),i+=c}this._lastSizes=o,this._state="showing"}rects(){const t=[];if(this._svg)if(this._config.multiline){const e=this._e.getClientRects();for(let n=0;n<e.length;n++)t.push(this.svgRect(this._svg,e[n]))}else t.push(this.svgRect(this._svg,this._e.getBoundingClientRect()));return t}svgRect(t,e){const n=t.getBoundingClientRect(),o=e;return{x:(o.x||o.left)-(n.x||n.left),y:(o.y||o.top)-(n.y||n.top),w:o.width,h:o.height}}}const En=["underline","box","circle","highlight","strike-through","crossed-off","bracket"];var kn=t=>Ve({name:"RoughNotation",emits:["init"],props:{type:{type:String,required:!0,validator:t=>En.indexOf(t)>-1},tag:{type:String,default:"span"},isShow:{type:Boolean,default:!1},animate:{type:Boolean,default:()=>t.animate},animationDuration:{type:Number,default:()=>t.animationDuration},color:{type:String,default:()=>t.color},strokeWidth:{type:Number,default:()=>t.strokeWidth},padding:{type:[Number,Array],default:()=>t.padding},multiline:{type:Boolean,default:()=>t.multiline},iterations:{type:Number,default:()=>t.iterations},brackets:{type:[String,Array],default:()=>t.brackets},order:{type:[Number,String],default:0}},mounted(){this.annotation=function(t,e){return new Nn(t,e)}(this.$el,{type:this.type,animate:this.animate,animationDuration:this.animationDuration,color:this.color,strokeWidth:this.strokeWidth,padding:this.padding,multiline:this.multiline,iterations:this.iterations}),this.$emit("init",this.annotation),this.$_dispatchGroup("annotation:add"),this.$watch("isShow",t=>{t?this.show():this.hide()},{immediate:!0}),this.$watch("color",t=>{this.annotation.color=t}),this.$watch("strokeWidth",t=>{this.annotation.strokeWidth=t}),this.$watch("padding",t=>{this.annotation.padding=t})},beforeUnmount(){this.$_dispatchGroup("annotation:remove"),this.annotation&&this.annotation.remove()},methods:{show(){this.annotation&&this.annotation.show()},hide(){this.annotation&&this.annotation.hide()},isShowing(){return!(!this.annotation||!this.annotation.isShowing())},$_dispatchGroup(t){let e=this.$parent||this.$root,n=e.$options.name;for(;e&&(!n||"RoughNotationGroup"!==n);)e=e.$parent,e&&(n=e.$options.name);e&&e.emitter.emit(t,this)}},render(){const t="function"==typeof this.$slots.default?this.$slots.default():this.$slots.default;return this.tag?sn(this.tag,null,t):t&&t[0]}});function xn(t,e){return t-e}var On=Ve({name:"RoughNotationGroup",props:{isShow:{type:Boolean,default:!1},tag:{type:String,default:"div"},orderAnnotations:{type:Function,default:xn}},data:()=>({rnVueInstances:[]}),watch:{isShow(t){t?this.show():this.hide()},rnVueInstances(t){const e=this.$_order(t);this.group=function(t){let e=0;for(const n of t){const t=n;t._animationDelay=e,e+=0===t.animationDuration?0:t.animationDuration||800}const n=[...t];return{show(){for(const t of n)t.show()},hide(){for(const t of n)t.hide()}}}(e)}},created(){this.emitter=function(t){return{all:t=t||new Map,on:function(e,n){var o=t.get(e);o?o.push(n):t.set(e,[n])},off:function(e,n){var o=t.get(e);o&&(n?o.splice(o.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var o=t.get(e);o&&o.slice().map((function(t){t(n)})),(o=t.get("*"))&&o.slice().map((function(t){t(e,n)}))}}}(),this.emitter.on("annotation:add",t=>{this.$_add(t)}),this.emitter.on("annotation:remove",t=>{this.$_remove(t)})},mounted(){this.isShow&&this.show()},beforeUnmount(){this.emitter.all.clear()},methods:{show(){this.group&&this.group.show()},hide(){this.group&&this.group.hide()},$_order(t){const e="function"==typeof this.orderAnnotations?this.orderAnnotations:xn;return t.slice().sort((t,n)=>e(t.order,n.order)).map(t=>t.annotation)},$_add(t){this.rnVueInstances=this.rnVueInstances.concat(t)},$_remove(t){const e=this.rnVueInstances.indexOf(t);e>-1&&this.rnVueInstances.splice(e,1)}},render(){const t="function"==typeof this.$slots.default?this.$slots.default():this.$slots.default;return this.tag?sn(this.tag,null,t):t&&t[0]}});const Sn=kn(e),Vn=On,Rn={install:(t,n={})=>{const o={...e,...n},s=kn(o);t.component("rough-notation",s),t.component("RoughNotation",s),t.component("rough-notation-group",On),t.component("RoughNotationGroup",On)}};t.RoughNotationComponent=Sn,t.RoughNotationGroupComponent=Vn,t.default=Rn,Object.defineProperty(t,"__esModule",{value:!0})}));
